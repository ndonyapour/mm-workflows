steps:
  duplicate_int2D:
    in:
      input_array: !ii [1, 2, 3]
      num_duplicates: !ii 3
    out:
    - output_array: !& output_2D_int

  duplicate_str2D:
    in:
      input_array: !ii ['1', '2', '3']
      num_duplicates: !ii 1
    out:
    - output_array: !& output_2D_str

  extract_pdbbind_refined:
    in:
      # https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.query.html
      # The query() method uses a slightly modified Python syntax by default.
      # For example, the & and | (bitwise) operators have the precedence of their
      # boolean cousins, and and or. This is syntactically valid Python, however
      # the semantics are different.
      query: !ii '(Kd_Ki == "Kd") and (value < 0.001)'
      max_row: !ii 3 #25 # Use 1 for CI
      convert_Kd_dG: !ii True
      output_txt_path: !ii binding_data.txt
    out:
    - output_txt_path: !& binding_data.txt
    - output_pdb_paths: !& pdbbind_pdbs
    - output_sdf_paths: !& pdbbind_sdfs
    - experimental_dGs: !& exp_dGs
    - pdb_ids: !& pdbids

  duplicate_pdb2D:
    in:
      input_array: !* pdbbind_pdbs
      num_duplicates: !ii 3
    out:
    - output_array: !& output_2D_pdb